<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Question 5</title>

<link href="https://fonts.googleapis.com/css2?family=Lobster&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
body{
margin:0;
width:100vw;
height:100vh;
overflow:hidden;
background-image:url("qn5bg.JPG");
background-size:cover;
background-position:center;
font-family:"Lobster",sans-serif;
color:rgb(108,1,1);
display:flex;
flex-direction:column;
align-items:center;
}

/* RISK METER */

.risk-meter{
position:fixed;
top:30px;
right:40px;
width:240px;
background:rgba(255,255,255,.55);
padding:14px 18px 18px;
border-radius:18px;
backdrop-filter:blur(6px);
box-shadow:0 0 18px rgba(108,1,1,.3);
z-index:5;
}

.risk-header{text-align:center;font-size:1.3rem;margin-bottom:10px;}
.risk-bar-bg{width:100%;height:18px;background:#eee;border-radius:12px;overflow:hidden;}
.risk-bar-fill{height:100%;width:0%;background:linear-gradient(90deg,#ffd700,#ff8c00,#b30000);transition:.6s}

/* MESSAGE AREA */

.message-wrapper{
margin-top:160px;
position:relative;
min-height:120px;
}

/* Shared bubble style */

.bubble{
max-width:700px;
padding:28px 34px;
border-radius:28px;
font-family:"Poppins",sans-serif;
font-size:1.5rem;
line-height:1.5;
box-shadow:0 15px 40px rgba(0,0,0,.3);
position:relative;
background:#e8f0ff;
}

/* Properly connected tail */

.bubble::before{
content:"";
position:absolute;
left:-50px;
top:50%;
transform:translateY(-50%);
border-width:20px 50px 20px 0;
border-style:solid;
border-color:transparent rgba(255,255,255,.85) transparent transparent;
}

/* Typing dots */

.typing{
display:flex;
gap:6px;
}

.dot{
width:8px;
height:8px;
background:#6c0101;
border-radius:50%;
animation:bounce 1.2s infinite ease-in-out;
}

.dot:nth-child(2){animation-delay:.2s;}
.dot:nth-child(3){animation-delay:.4s;}

@keyframes bounce{
0%,80%,100%{transform:scale(0);}
40%{transform:scale(1);}
}

/* Fade animation */

.hidden{display:none;}
.fade-in{animation:fadeIn .6s forwards;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

/* CONTEXT TEXT */

.context-text{
margin-top:50px;
max-width:900px;
text-align:center;
font-size:1.5rem;
}

/* OPTIONS */

.options-row{
margin-top:70px;
display:flex;
gap:30px;
flex-wrap:wrap;
justify-content:center;
}

.option{
padding:16px 30px;
border:2px solid rgb(108,1,1);
border-radius:50px;
background:rgba(255,255,255,.75);
cursor:pointer;
transition:.3s;
font-size:1.3rem;
text-align:center;
max-width:280px;
}

.option:hover{transform:scale(1.05);}

.red{background:#a40000;color:white;border-color:#a40000;}
.green{background:#2e8b57;color:white;border-color:#2e8b57;}
.yellow{background:#e6b800;color:black;border-color:#e6b800;}

/* BOTTOM FEEDBACK BUBBLE */

.feedback-bubble{
position:fixed;
bottom:-200px;
left:50%;
transform:translateX(-50%);
max-width:600px;
background:rgba(255,255,255,.95);
padding:20px 28px;
border-radius:24px;
box-shadow:0 15px 35px rgba(0,0,0,.35);
font-family:"Lobster",sans-serif;
font-size:1.2rem;
text-align:center;
transition:.6s;
z-index:20;
}

.feedback-bubble.show{
bottom:40px;
}
</style>
</head>

<body>

<div class="risk-meter">
<div class="risk-header">⚠ Risk Level</div>
<div class="risk-bar-bg"><div class="risk-bar-fill" id="riskBar"></div></div>
</div>

<!-- MESSAGE -->
<div class="message-wrapper">

<div id="typingBubble" class="bubble">
    <div class="typing">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
    </div>
</div>

<div id="messageBubble" class="bubble hidden">
    “Can I see your cute face? Send a photo just for me baby”
</div>

</div>

<!-- CONTEXT -->
<div class="context-text" id="storyText">
Even after narrowly avoiding the topic about where you live, he continues to ask for a picture of you. He thinks this is normal for people "more than friends".
</div>

<!-- OPTIONS -->
<div class="options-row">

<div class="option" id="opt1" onclick="choose(1)">
Reply by sending a picture
</div>

<div class="option" id="opt2" onclick="choose(2)">
Send a non-personal photo and double check their profile and photos carefully
</div>

<div class="option" id="opt3" onclick="choose(3)">
Say no and change the topic
</div>

<div class="feedback-bubble" id="feedbackBubble">

</div>

<div id="messageBubble" class="bubble" style="display:none;">
    
</div>
<script>
let riskLevel = Number(localStorage.getItem("riskLevel")) || 0;
const inc = 100 / 7;
riskBar.style.width = riskLevel + "%";

const feedback = document.getElementById("feedbackBubble");
const typingBubble = document.getElementById("typingBubble");
const messageBubble = document.getElementById("messageBubble");

/* --- FIXED TYPING SEQUENCE --- */

setTimeout(()=>{
    if(typingBubble){
        typingBubble.style.display = "none";
    }
    if(messageBubble){
        messageBubble.style.display = "flex";
        messageBubble.style.opacity = "1";
    }
},2000);

/* --- FEEDBACK --- */

function showFeedback(text){
    feedback.textContent = text;
    feedback.classList.add("show");
}

/* --- OPTIONS LOGIC --- */

function choose(c){

    document.querySelectorAll(".option").forEach(o=>{
        o.style.pointerEvents="none";
    });

    if(c==1){
        opt1.classList.add("red");

        riskLevel += inc;
        if(riskLevel>100) riskLevel=100;
        riskBar.style.width=riskLevel+"%";
        localStorage.setItem("riskLevel",riskLevel);

        showFeedback("Oh no! You're in danger of impersonation using your photo! For your safety choose again!");

        /* allow re-selection after 3 seconds */
        setTimeout(()=>{
            opt1.classList.remove("red");
            feedback.classList.remove("show");

            document.querySelectorAll(".option").forEach(o=>{
                o.style.pointerEvents="auto";
            });
        },3000);
    }

    if(c==2){
        opt2.classList.add("green");

        showFeedback("Good! That's a good choice to keep things casual while still being cautious!");

        setTimeout(()=>{
            window.location.href="qn6.html";
        },2500);
    }

    if(c==3){
        opt3.classList.add("green");

        showFeedback("Hmm...you could come off as cold but at least your privacy is protected and boundaries are set!");

        setTimeout(()=>{
            window.location.href="qn6.html";
        },2500);
    }
}
</script>
</body>
</html>