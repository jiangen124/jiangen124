<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Question 2</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lobster+Two:ital,wght@0,400;0,700;1,400;1,700&family=Rowdies:wght@300;400;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;

    background-image: url("qn2bg.JPG");
    background-size: cover;
    background-position: center;

    color: rgb(108, 1, 1);
}

.risk-meter {
    position: absolute;
    top: 45px;
    right: 80px;
    width: 240px;
    background: rgba(255, 255, 255, 0.55);
    padding: 14px 18px 18px;
    border-radius: 18px;
    box-shadow: 0 0 18px rgba(108, 1, 1, 0.3);
    backdrop-filter: blur(6px);
    scale:1.4;
}

.risk-header {
    text-align: center;
    font-size: 1.3rem;
    color: rgb(108, 1, 1);
    margin-bottom: 10px;

    font-family: "Rowdies", sans-serif;
    font-weight: 400;
    font-style: normal;
}

.risk-bar-bg {
    width: 100%;
    height: 18px;
    background: #eee;
    border-radius: 12px;
    overflow: hidden;
}

.risk-bar-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(
        90deg,
        #ffd700,
        #ff8c00,
        #b30000
    );
    box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
    transition: width 0.6s ease;
}

/* Activated when risk increases */
.risk-meter.danger {
    background: rgba(10, 0, 0, 0.9);
    border: 2px solid rgb(108, 1, 1);
    box-shadow: 0 0 25px rgba(108, 1, 1, 0.6);
}

.risk-meter.danger .risk-header {
    color: rgb(200, 20, 20);
    letter-spacing: 1px;
}

.risk-meter.danger .risk-bar-bg {
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(200, 20, 20, 0.4);
}

/* ================= MAIN CONTENT ================= */
.page {
    width: 100%;
    height: 100%;
    padding-top: 120px;

    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.story-text {
    font-size: 2.15rem;
    max-width: 1100px;
    margin-top:-20px;
    margin-bottom: 18px;
    font-family: "Lobster Two", sans-serif;
    font-weight: 700;
    font-style: normal;
}

/* ================= CHAT PANEL ================= */
.chat-panel{
    width:890px;
    height:370px;
    background:linear-gradient(#f8b1c9,#aa7084);
    border-radius:28px;
    box-shadow:0 0 35px rgba(0,0,0,.3);
    display:flex;
    flex-direction:column;
    overflow:hidden;
    font-family: "Rowdies", sans-serif;
    font-weight: 300;
    font-style: normal;
    margin-top:125px;
    margin-bottom:40px;
    scale:1.5;
}

.chat-header{
    padding:16px 24px;
    background:rgba(255,255,255,.85);
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:1px solid #ddd;
}

.chat-header span{
    font-size:1.1rem;
    font-weight:600;
}

.online{
    font-size:.8rem;
    color:green;
}

.chat{
    flex:1;
    padding:24px;
    overflow-y:auto;
    display:flex;
    flex-direction:column;
    gap:40px;
    text-align: left;
    font-size: 4px;
}

.message{
    display:flex;
    flex-direction:column;
    max-width:65%;
}

.jen{align-self:flex-end;}
.tom{align-self:flex-start;}

.name{
    font-size:.7rem;
    opacity:.6;
    margin-bottom:4px;
    text-align: left;
}

.bubble{
    padding:12px 16px;
    border-radius:18px;
    font-size:1.2rem;
    line-height:1.7;
    max-width: 450px;
}

.jen .bubble{background:#f9f1f1;}
.tom .bubble{background:#cfdef8;}

.typing{
    font-size:.8rem;
    opacity:.6;
    letter-spacing:3px;
}

/* ================= OPTIONS ================= */
.option {
    margin-bottom: 18px;
    margin-top:150px;
    padding: 16px 30px;
    border: 2px solid rgb(255, 255, 255);
    border-radius: 40px;
    width: fit-content;
    cursor: pointer;
    background: #aa7084;
    transition: all 0.3s ease;
    font-size: 1.1rem;
    font-family: "Rowdies", sans-serif;
    font-weight: 400;
    font-style: normal;
    scale:1.52;

}

.option:hover {
    transform: scale(1.05);
}

.options-row {
    display: flex;
    gap: 150px;
    justify-content: center;
    align-items: stretch;
    flex-wrap: wrap; /* allows wrap if screen is narrow */
    max-width: 1100px;
}

.option {
    max-width: 200px;
    text-align: center;
    color:#ffffff;
}

.red {
    background: #a40000;
    color: white;
    border-color: #a40000;
}

.green {
    background: #2e8b57;
    color: white;
    border-color: #2e8b57;
}

.yellow {
    background: #e6b800;
    color: black;
    border-color: #e6b800;
}

/* ================= SPEECH BUBBLE ================= */
.speech-bubble {
    position: fixed;
    bottom: -200px;
    left: 120px;
    max-width: 420px;
    padding: 20px 26px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    color: rgb(108, 1, 1);
    font-size: 1.2rem;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    transition: all 0.6s ease;
    z-index: 10;
    font-family: "Lobster Two", sans-serif;
    font-weight: 700;
    font-style: italic;
    scale:1.45;
}

.speech-bubble::after {
    content: "";
    position: absolute;
    bottom: -18px;
    left: 40px;
    border-width: 18px 14px 0 14px;
    border-style: solid;
    border-color: rgba(255, 255, 255, 0.95) transparent transparent transparent;
}

.speech-bubble.show {
    bottom: 50px;
}
</style>
</head>

<body>

<!-- RISK METER -->
<div class="risk-meter">
    <div class="risk-header">⚠ Risk Level</div>
    <div class="risk-bar-bg">
        <div class="risk-bar-fill" id="riskBar"></div>
    </div>
</div>

<div class="page">

    <div class="story-text">
        You do it for the plot and start texting him anyway.
        After just one day, he says:
    </div>

    <div class="chat-panel">
    <div class="chat-header">
        <span>Jennifer & Tommy</span>
        <span class="online">● Online</span>
    </div>

    <div class="chat">
        <!-- Tommy's message -->
        <div class="message tom">
            <div class="name">Tommy</div>
            <div class="bubble">
                I feel like I can really trust you. I don't usually open up this fast. 
                But it should be two-ways.
            </div>
        </div>

        <!-- Jennifer typing -->
        <div class="message jen">
            <div class="name">Jennifer</div>
            <div class="bubble typing">...</div>
        </div>
    </div>
</div>


    <div class="options-row">
        <div class="option" id="opt1" onclick="chooseOption(1)">
            1. Reciprocate! – Say you feel the same and tell them a secret of yours
        </div>

        <div class="option" id="opt2" onclick="chooseOption(2)">
            2. Woah too fast! Tell them that you want to take things slow
        </div>

        <div class="option" id="opt3" onclick="chooseOption(3)">
            3. Ignore the message and change the topic
        </div>
    </div>


</div>

<!-- SPEECH BUBBLE -->
<div class="speech-bubble" id="speechBubble">
    <span id="bubbleText"></span>
</div>

<script>
/* ================= RISK STATE ================= */
const riskIncrement = 100 / 7;
let riskLevel = Number(localStorage.getItem("riskLevel")) || 0;

const riskBar = document.getElementById("riskBar");
const riskMeter = document.querySelector(".risk-meter");

/* Restore meter progress + colour on page load */
function syncRiskMeter() {
    riskBar.style.width = riskLevel + "%";

    if (riskLevel > 0) {
        riskMeter.classList.add("danger");
    } else {
        riskMeter.classList.remove("danger");
    }
}

syncRiskMeter();

/* ================= SPEECH BUBBLE ================= */
const bubble = document.getElementById("speechBubble");
const bubbleText = document.getElementById("bubbleText");

function showBubble(text) {
    bubbleText.textContent = text;
    bubble.classList.add("show");
}

/* ================= NAVIGATION ================= */
function goNext() {
    setTimeout(() => {
        window.location.href = "qn3.html";
    }, 4000);
}

/* ================= CHOICES ================= */
function chooseOption(choice) {
    document.querySelectorAll(".option").forEach(opt => {
        opt.style.pointerEvents = "none";
    });

    if (choice === 1) {
        document.getElementById("opt1").classList.add("red");

        riskLevel += riskIncrement;
        if (riskLevel > 100) riskLevel = 100;

        localStorage.setItem("riskLevel", riskLevel);
        syncRiskMeter();

        showBubble(
            "Oh no! Revealing information they can use against you is dangerous!"
        );

        goNext();
    }

    if (choice === 2) {
        document.getElementById("opt2").classList.add("green");

        showBubble(
            "Good! Making your intention clear since the start helps maintain healthy boundaries."
        );

        goNext();
    }

    if (choice === 3) {
        document.getElementById("opt3").classList.add("yellow");

        riskLevel += riskIncrement;
        if (riskLevel > 100) riskLevel = 100;

        localStorage.setItem("riskLevel", riskLevel);
        syncRiskMeter();

        showBubble(
            "You might be safe for now...but it could happen again in the future!"
        );

        goNext();
    }
}
</script>


</body>
</html>
